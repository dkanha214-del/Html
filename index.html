<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AV BOTz Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:Arial;
}
#box{width:100%;max-width:900px}
#loading{text-align:center}
video{width:100%;display:none}
#error{color:#ff4444;text-align:center;display:none}
</style>
</head>
<body>

<div id="box">
  <div id="loading">Loading streamâ€¦</div>
  <div id="error"></div>
  <video id="player" controls autoplay playsinline></video>
</div>

<script>
/* ===== CONFIG ===== */
const RENDER_BACKEND_URL = "https://YOUR-RENDER-APP.onrender.com";

/* ===== TOKEN ===== */
const token = location.pathname.split("/").pop();

if(!token){
  showError("Invalid link");
}

/* ===== BACKEND CALL ===== */
fetch(`${RENDER_BACKEND_URL}/api/get_stream/${token}`)
.then(r => r.json())
.then(d => {
  if(d.status !== "ok"){
    showError("Link expired or invalid");
    return;
  }
  const v = document.getElementById("player");
  v.src = d.stream_url;
  v.style.display = "block";
  document.getElementById("loading").style.display = "none";
})
.catch(() => showError("Backend not reachable"));

function showError(msg){
  document.getElementById("loading").style.display = "none";
  const e = document.getElementById("error");
  e.innerText = msg;
  e.style.display = "block";
}
</script>

</body>
</html>
